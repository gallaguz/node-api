name: Check
on: push
jobs:
    lint:
        runs-on: self-hosted
        steps:
            - name: Checkout
              uses: actions/checkout@v3
            - name: Install deps
              run: npm ci
            - name: Lint
              run: npm run lint
    test-e2e:
        runs-on: self-hosted
        needs: [lint]
        steps:
            - name: Checkout
              uses: actions/checkout@v3
            - name: Tests
              uses: cloudposse/github-action-docker-compose-test-run@main
              with:
                  file: docker-compose-testing.yaml
                  command: npm run test:init && npm run test:e2e
